
Path
----
C:\code\wyoming\src\dotnet10preview4\single


    Directory: C:\code\wyoming\src\dotnet10preview4\single

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a---           5/30/2025  6:42 AM           4699 app.cs
-a---           5/29/2025 10:21 PM           7218 averagediskqueuelength.txt
-a---           5/29/2025 10:21 PM           6968 bytespersecond.txt
-a---           5/29/2025 10:21 PM           6916 percentdisktime.txt
-a---           5/30/2025  6:42 AM             61 powershell.txt

using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;

public class StatisticalCalculator
{
    public class FileStatistics
    {
        public string FileName { get; set; }
        public double Mean { get; set; }
        public double Median { get; set; }
        public double StandardDeviation { get; set; }
        public double Maximum { get; set; }
        public double Minimum { get; set; }
        public double P75 { get; set; }
        public double P90 { get; set; }
        public double P99 { get; set; }
        public int Count { get; set; }
        public TimeSpan ReadTime { get; set; }
        public TimeSpan CalculationTime { get; set; }
    }

    public static FileStatistics CalculateStatistics(string filePath)
    {
        var stats = new FileStatistics { FileName = Path.GetFileName(filePath) };

        var startReadTime = DateTime.UtcNow;
        var data = new List<double>();
        try
        {
            foreach (var line in File.ReadLines(filePath))
            {
                if (double.TryParse(line, out double value))
                {
                    data.Add(value);
                }
            }
        }
        catch (FileNotFoundException)
        {
            Console.WriteLine($"Error: File not found at {filePath}");
            return null;
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error reading file {filePath}: {ex.Message}");
            return null;
        }
        stats.ReadTime = DateTime.UtcNow - startReadTime;

        if (!data.Any())
        {
            Console.WriteLine($"No valid data found in {filePath}");
            return stats;
        }

        var startCalcTime = DateTime.UtcNow;

        data.Sort(); // Sort for median and percentiles

        stats.Count = data.Count;
        stats.Mean = data.Average();
        stats.Minimum = data.Min();
        stats.Maximum = data.Max();

        // Median
        if (data.Count % 2 == 0)
        {
            stats.Median = (data[data.Count / 2 - 1] + data[data.Count / 2]) / 2;
        }
        else
        {
            stats.Median = data[data.Count / 2];
        }

        // Standard Deviation
        var sumOfSquaresOfDifferences = data.Sum(val => Math.Pow(val - stats.Mean, 2));
        stats.StandardDeviation = Math.Sqrt(sumOfSquaresOfDifferences / (data.Count - 1)); // Sample standard deviation

        // Percentiles
        stats.P75 = CalculatePercentile(data, 75);
        stats.P90 = CalculatePercentile(data, 90);
        stats.P99 = CalculatePercentile(data, 99);

        stats.CalculationTime = DateTime.UtcNow - startCalcTime;

        return stats;
    }

    private static double CalculatePercentile(List<double> sortedData, double percentile)
    {
        if (!sortedData.Any()) return 0;
        if (percentile < 0 || percentile > 100)
            throw new ArgumentOutOfRangeException(nameof(percentile), "Percentile must be between 0 and 100.");

        double rank = (percentile / 100.0) * (sortedData.Count - 1);
        int lowerIndex = (int)Math.Floor(rank);
        int upperIndex = (int)Math.Ceiling(rank);

        if (lowerIndex == upperIndex)
        {
            return sortedData[lowerIndex];
        }
        else
        {
            double lowerValue = sortedData[lowerIndex];
            double upperValue = sortedData[upperIndex];
            return lowerValue + (upperValue - lowerValue) * (rank - lowerIndex);
        }
    }
}


string[] files = { "percentdisktime.txt", "averagediskqueuelength.txt", "bytespersecond.txt" };

foreach (var file in files)
{
    Console.WriteLine($"\n--- Processing {file} ---");
    var stats = StatisticalCalculator.CalculateStatistics(file);

    if (stats != null)
    {
        Console.WriteLine($"File: {stats.FileName}");
        Console.WriteLine($"Total Data Points: {stats.Count}");
        Console.WriteLine($"Mean: {stats.Mean:N3}");
        Console.WriteLine($"Median: {stats.Median:N3}");
        Console.WriteLine($"Standard Deviation: {stats.StandardDeviation:N3}");
        Console.WriteLine($"Maximum: {stats.Maximum:N3}");
        Console.WriteLine($"Minimum: {stats.Minimum:N3}");
        Console.WriteLine($"P75: {stats.P75:N3}");
        Console.WriteLine($"P90: {stats.P90:N3}");
        Console.WriteLine($"P99: {stats.P99:N3}");
        Console.WriteLine($"Time to read file: {stats.ReadTime.TotalMilliseconds:N2} ms");
        Console.WriteLine($"Time to calculate statistics: {stats.CalculationTime.TotalMilliseconds:N2} ms");
    }
}
.NET SDK:
 Version:           10.0.100-preview.4.25258.110
 Commit:            c22dcd0c7a
 Workload version:  10.0.100-manifests.e9b6aa6e
 MSBuild version:   17.15.0-preview-25258-110+c22dcd0c7

Runtime Environment:
 OS Name:     Windows
 OS Version:  10.0.26100
 OS Platform: Windows
 RID:         win-x64
 Base Path:   C:\Program Files\dotnet\sdk\10.0.100-preview.4.25258.110\

.NET workloads installed:
 [aspire]
   Installation Source: VS 17.14.36127.28
   Manifest Version:    8.2.2/8.0.100
   Manifest Path:       C:\Program Files\dotnet\sdk-manifests\8.0.100\microsoft.net.sdk.aspire\8.2.2\WorkloadManifest.json
   Install Type:              Msi

Configured to use workload sets when installing new manifests.
Workloads are configured to install and update using workload versions, but none were found. Run "dotnet workload restore" to install a workload version.

Host:
  Version:      10.0.0-preview.4.25258.110
  Architecture: x64
  Commit:       c22dcd0c7a

.NET SDKs installed:
  9.0.100 [C:\Program Files\dotnet\sdk]
  9.0.300 [C:\Program Files\dotnet\sdk]
  10.0.100-preview.4.25258.110 [C:\Program Files\dotnet\sdk]

.NET runtimes installed:
  Microsoft.AspNetCore.App 8.0.16 [C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App]
  Microsoft.AspNetCore.App 9.0.0 [C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App]
  Microsoft.AspNetCore.App 9.0.5 [C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App]
  Microsoft.AspNetCore.App 10.0.0-preview.4.25258.110 [C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App]
  Microsoft.NETCore.App 8.0.16 [C:\Program Files\dotnet\shared\Microsoft.NETCore.App]
  Microsoft.NETCore.App 9.0.0 [C:\Program Files\dotnet\shared\Microsoft.NETCore.App]
  Microsoft.NETCore.App 9.0.5 [C:\Program Files\dotnet\shared\Microsoft.NETCore.App]
  Microsoft.NETCore.App 10.0.0-preview.4.25258.110 [C:\Program Files\dotnet\shared\Microsoft.NETCore.App]
  Microsoft.WindowsDesktop.App 8.0.16 [C:\Program Files\dotnet\shared\Microsoft.WindowsDesktop.App]
  Microsoft.WindowsDesktop.App 9.0.0 [C:\Program Files\dotnet\shared\Microsoft.WindowsDesktop.App]
  Microsoft.WindowsDesktop.App 9.0.5 [C:\Program Files\dotnet\shared\Microsoft.WindowsDesktop.App]
  Microsoft.WindowsDesktop.App 10.0.0-preview.4.25258.110 [C:\Program Files\dotnet\shared\Microsoft.WindowsDesktop.App]

Other architectures found:
  x86   [C:\Program Files (x86)\dotnet]
    registered at [HKLM\SOFTWARE\dotnet\Setup\InstalledVersions\x86\InstallLocation]

Environment variables:
  Not set

global.json file:
  Not found

Learn more:
  https://aka.ms/dotnet/info

Download .NET:
  https://aka.ms/dotnet/download
2025-05-30 06:42:59
__________________________________________________
Project "C:\code\wyoming\src\dotnet10preview4\single\app.csproj" (Build target(s)):

C:\code\wyoming\src\dotnet10preview4\single\app.cs(115,1): error CS8803: Top-level statements must precede namespace and type declarations.
Done building project "app.csproj" -- FAILED.
2025-05-30 06:43:07
